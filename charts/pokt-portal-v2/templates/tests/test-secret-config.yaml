---
apiVersion: v1
kind: Secret
metadata:
  creationTimestamp: null
  name: {{ .Values.middleware.secretName }}
stringData:
  config.json: |-
    {
    "chain_mappings": {
        "eth-mainnet": "eth",
        "eth-goerli": "eth",
        "avax-mainnet": "avax"
    },
    "scheduled_relay_check_interval": 50,
    "backend_config": {
        "backends": [
        ]
    },
    "plugins_config": {
        "plugins": [
        ]
    }
    }
  GATEWAY_PRIVATE_KEY: "2dbdeac3848a019e72740854c124d60e1a2ba22f428710d9b8c24577fd87b1dabd95fa2f8eb8708f82c157f9d8a6b6b5110a78c176e1f078a29cc06a2ac9f21f"
  DISPATCHER_URL: "https://dispatcher.io"
  POCKET_NODE_URL: "https://pocketnode.io"
---
apiVersion: v1
kind: Pod
metadata:
  name: "{{ include "pokt-portal-v2.fullname" . }}-test-connection"
  labels:
    {{- include "pokt-portal-v2.labels" . | nindent 4 }}
  annotations:
    "helm.sh/hook": test
spec:
  containers:
    - name: wget
      image: busybox
      command: ['wget']
      args: ['{{ include "pokt-portal-v2.fullname" . }}:{{ .Values.service.port }}/healthz']
  restartPolicy: Never
